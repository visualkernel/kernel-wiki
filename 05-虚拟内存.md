# 目标
为了便于实现多任务之下的内存管理，在物理内存之上抽象出了虚拟内存。程序访问虚拟内存单元而使用的地址称为虚拟地址（也称线性地址）。本章主要讲解80x86硬件环境中，虚拟内存是如何表示和管理的。

# 虚拟内存
虚拟内存的基本思想：每个程序拥有自己的虚拟地址空间，这个空间以页为单元划分成多个块。每个页有连续的地址范围，这些页被映射到物理内存。一个运行的程序并不需要所有的页都存放在物理内存中。当程序引用到一部分不在物理内存中的地址空间时，由内核负责将缺失的部分装入物理内存，并完成虚拟内存页与物理内存页的映射，再重新执行失败的指令。

# 分页
虚拟地址空间按固定大小划分为称为**页**的若干单元。在x86架构中，32位的处理器页默认大小为4KB，64位的处理器页默认大小为8KB。

因为虚拟地址空间划分是从0开始，且页大小固定，所有每个页在虚拟内存中位置都是固定的。以4KB页大小为单位，所以每个页的首地址依次为0, 4KB, 8KB, 16KB, ...。如果知道了页号，就可以计算出页的首地址了。

```
页的地址(页的首地址) = 页号 * PAGE_SIZE
```

一般虚拟地址可以拆分为两部分：页号、页内偏移。通过页号可以找到具体的某个页，再加上页内偏移，就可以找到具体某个内存单元了。

```
内存地址 = 页号 * PAGE_SIZE + offset
```

# 页表
页表是用于维护虚拟页到物理页的映射关系的集合。
